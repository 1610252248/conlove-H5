(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-square-reply-post-reply-comment"],{"1f49":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c={methods:{BackPage:function(){1!=getCurrentPages().length?uni.navigateBack({delta:1}):history.back()},send:function(){this.$emit("send")}}};e.default=c},"715a":function(t,e,n){"use strict";n.r(e);var c=n("aba4"),i=n.n(c);for(var a in c)"default"!==a&&function(t){n.d(e,t,(function(){return c[t]}))}(a);e["default"]=i.a},"7fb2":function(t,e,n){"use strict";var c,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"navBar cu-bar"},[n("v-uni-view",{staticClass:"action margin-left ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.BackPage.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"text-icon"},[n("v-uni-text",{staticClass:"cuIcon-back"})],1)],1),n("v-uni-view",{staticClass:"content text-bold"},[t._t("center")],2)],1),n("v-uni-view",{staticStyle:{height:"82rpx"}})],1)},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}))},"8d2b":function(t,e,n){var c=n("fb11");"string"===typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);var i=n("4f06").default;i("4793a4df",c,!0,{sourceMap:!1,shadowMode:!1})},aba4:function(t,e,n){"use strict";(function(t){var c=n("ee27");n("c740"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("54f8")),a=c(n("f3f3")),o=n("2f62"),s={computed:(0,a.default)({},(0,o.mapState)(["userDB"])),data:function(){return{comment:{},placeholder:"评论",scrollId:"",replyName:"",isLoad:!1}},onLoad:function(t){var e=this,n=t.id;this.getComment(n),setTimeout((function(){e.isLoad=!0}),500)},methods:{clickMessage:function(){this.placeholder="评论",this.$refs.cInput.focusInput()},pChangLike:function(t,e){e?this.$http.get("/post/delCommentLike",{id:t}):this.$http.post("/post/addCommentLike",{commentId:t})},reply:function(t,e,n){this.replyName=n,this.$refs.cInput.clearContent(),this.placeholder="回复"+n+": ",this.$refs.cInput.focusInput()},sendComment:function(t){var e=this,n={content:t,commentId:this.comment.id};"评论"!=this.placeholder&&(n.replyName=this.replyName),this.scrollId="",this.$http.post("/post/replyComment",n).then((function(t){var n=t.data;n.user=e.userDB,e.comment.childComments.unshift(n),e.scrollId="comment"}))},getComment:function(t){var e=this;this.$http.get("/post/getReply",{id:t}).then((function(t){e.comment=t.data,e.setAppreciate(e.comment.childComments)}))},setAppreciate:function(e){var n=this;this.comment.childComments=[],this.$http.get("/post/reply/commentAppreciate").then((function(c){var a,o=c.data,s=(0,i.default)(e);try{var r=function(){var t=a.value,e=o.findIndex((function(e){return e.commentId==t.id}));t.isAppreciate=-1!=e,n.comment.childComments.push(t)};for(s.s();!(a=s.n()).done;)r()}catch(u){s.e(u)}finally{s.f()}t.log(n.comment)}))},changLike:function(t,e){e?this.$http.get("/post/reply/delCommentLike",{id:t}):this.$http.post("/post/reply/addCommentLike",{commentId:t})}}};e.default=s}).call(this,n("5a52")["default"])},abfe:function(t,e,n){"use strict";var c={cCustomMid:n("fc98").default,cScroll:n("c70c").default,cCommentInfo:n("1ce9").default,cComment:n("ec22").default,cInput:n("ef38").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("c-custom-mid",[n("template",{attrs:{slot:"center"},slot:"center"},[t._v(t._s(null==t.comment.childComments?"":t.comment.childComments.length+"条回复"))])],2),n("c-scroll",{attrs:{minHeight:!0,scrollId:t.scrollId}},[n("v-uni-view",{staticClass:"cu-list menu-avatar comment",attrs:{id:"comment"}},[Object.keys(t.comment).length?n("c-comment-info",{attrs:{comment:t.comment,replyInfo:!1},on:{"change-like":function(e){arguments[0]=e=t.$handleEvent(e),t.pChangLike.apply(void 0,arguments)},reply:function(e){arguments[0]=e=t.$handleEvent(e),t.clickMessage.apply(void 0,arguments)}}}):t._e()],1),n("c-comment",{attrs:{comments:t.comment.childComments,replyInfo:!1},on:{reply:function(e){arguments[0]=e=t.$handleEvent(e),t.reply.apply(void 0,arguments)},"change-like":function(e){arguments[0]=e=t.$handleEvent(e),t.changLike.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"cu-load",class:t.isLoad?"over":"loading"})],1),n("c-input",{ref:"cInput",attrs:{placeholder:t.placeholder},on:{"send-comment":function(e){arguments[0]=e=t.$handleEvent(e),t.sendComment.apply(void 0,arguments)}}})],1)},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}))},e819:function(t,e,n){"use strict";n.r(e);var c=n("1f49"),i=n.n(c);for(var a in c)"default"!==a&&function(t){n.d(e,t,(function(){return c[t]}))}(a);e["default"]=i.a},e87d:function(t,e,n){"use strict";n.r(e);var c=n("abfe"),i=n("715a");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var o,s=n("f0c5"),r=Object(s["a"])(i["default"],c["b"],c["c"],!1,null,"d473c444",null,!1,c["a"],o);e["default"]=r.exports},faab:function(t,e,n){"use strict";var c=n("8d2b"),i=n.n(c);i.a},fb11:function(t,e,n){var c=n("24fb");e=c(!1),e.push([t.i,".navBar[data-v-17709830]{position:fixed;top:0;width:100%;min-height:%?80?%;line-height:%?80?%;z-index:111;background-color:#fff}.cu-bar[data-v-17709830]{min-height:%?80?%}.cuIcon-back[data-v-17709830]{font-size:%?42?%}.cu-btn.sm[data-v-17709830]{padding:0 %?22?%;font-size:%?26?%;height:%?48?%}",""]),t.exports=e},fc98:function(t,e,n){"use strict";n.r(e);var c=n("7fb2"),i=n("e819");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("faab");var o,s=n("f0c5"),r=Object(s["a"])(i["default"],c["b"],c["c"],!1,null,"17709830",null,!1,c["a"],o);e["default"]=r.exports}}]);