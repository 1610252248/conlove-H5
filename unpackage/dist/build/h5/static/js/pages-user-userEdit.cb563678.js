(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-userEdit"],{"40f4":function(t,e,i){"use strict";i.r(e);var a=i("f9af"),s=i("d3df");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("e462");var l,r=i("f0c5"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"33055600",null,!1,a["a"],l);e["default"]=o.exports},4496:function(t,e,i){var a=i("d72e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("71d866a2",a,!0,{sourceMap:!1,shadowMode:!1})},"505d":function(t,e,i){"use strict";(function(t){var a=i("ee27");i("7db0"),i("c740"),i("a434"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("f3f3")),n=i("2f62"),l={computed:(0,s.default)({},(0,n.mapState)(["userDB"])),data:function(){return{user:{},birth:{year:"",month:"",day:""},isFemale:!1,sexPicker:["男","女"],TabCur:0,showYear:!1,showMonth:!1,showDay:!1,show:!1,showGrade:!1,showLevel:!1,showGraduation:!1,levelList:[{label:"学士"},{label:"硕士"},{label:"博士"}],graduationList:[{value:0,label:"未毕业"},{value:1,label:"已毕业"}],selectTagList:[],colorList:["bg-red","bg-yellow","bg-blue"],infoList:[{name:"专业",list:[["哲学类","经济类","法学类","教育类","文学类","历史类","理学类","工学类","农学类","医学类","管理类","艺术类","军事类"]],index:0},{name:"爱好",list:[["篮球","跑步","跳绳","举重","足球","滑板","羽毛球","兵乓球","滑旱冰","看书","听音乐","看电影","绘画","写小说","积木","王者荣耀"],["弹吉他","钢琴","萨克斯","葫芦丝","折纸","剪纸","品茶","涂鸦","英雄联盟","五子棋","CF","地下城勇士","飞行棋","真心话大冒险"],["吃鸡","国际象棋","扑克牌"]],index:0},{name:"日常",list:[],index:0},{name:"经历",list:[],index:0},{name:"其它",list:[],index:0}],changUser:!1}},onLoad:function(){this.init()},onBackPress:function(){for(var t in this.user)if(this.user[t]!==this.userDB[t]){this.changUser=!0;break}if(this.changUser)return this.show=!0,!0},methods:(0,s.default)({},(0,n.mapActions)(["set"]),{onConfirm:function(t){var e=t.label.split("-")[2];"暂未收录"!==e&&(this.user.school=e)},init:function(){var t=this;if(this.user=this.$u.deepClone(this.userDB),null!=this.user.birthDate){var e=this.user.birthDate.split("-");this.birth.year=e[0],this.birth.month=e[1],this.birth.day=e[2]}this.$http.get("/userLabel",{id:this.user.id}).then((function(e){t.selectTagList=[],t.selectTagList=e.data}))},sexChange:function(t){this.user.sex=this.sexPicker[t.detail.value]},setGrage:function(t){this.user.grade=t.year},setGraduate:function(t){this.user.graduation=t[0].value},setLevel:function(t){this.user.level=t[0].label},setDate:function(e){for(var i in e)this.birth[i]=e[i];var a=this.birth;this.user.birthDate=a.year+"-"+a.month+"-"+a.day,t.log(this.user.birthDate)},gradeChange:function(t){this.user.grade=this.gradePicker[t.detail.value]},changeList:function(){var t=this.TabCur,e=this.infoList[t];e.index+1<e.list.length?e.index++:(this.$u.toast("没有其他标签了"),e.index=0)},getTabColor:function(t){return this.selectTagList.find((function(e){return e.name===t}))?this.getTagColor(this.TabCur):"tag-border"},getTagColor:function(t){return this.colorList[t%3]},changeTag:function(t){this.changUser=!0;var e=this.selectTagList.findIndex((function(e){return e.name===t})),i={name:t,userId:this.userDB.id};-1!=e?this.selectTagList.splice(e,1):this.selectTagList.push(i)},updateAvatar:function(){var t=this;this.$http.urlImgUpload("/fileUpload").then((function(e){t.user.avatar=e[0]}))},cancel:function(){uni.navigateBack()},save:function(){var t=this,e=this.birth;null!=e.year&&null!=e.month&&null!=e.day||this.$refs.uToast.show({title:"请填写生日",type:"warning"}),this.$http.post("/updateUserInfo",{user:this.user,label:this.selectTagList}).then((function(e){e.status==t.$http.SUCCESS&&(t.set({user:t.user}),t.$refs.uToast.show({title:e.msg,type:"success",url:"/pages/user/user",isTab:!0}),t.$eventBus.$emit("update-user-info"))}))},confirm:function(){uni.switchTab({url:"/pages/user/user"})}})};e.default=l}).call(this,i("5a52")["default"])},d3df:function(t,e,i){"use strict";i.r(e);var a=i("505d"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},d72e:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".title[data-v-33055600]{height:%?44?%;line-height:%?44?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.card-item[data-v-33055600]{height:%?50?%;display:inline-block;line-height:%?50?%;margin:0 %?18?%;padding:0 %?4?%;color:#333}.card-item[data-v-33055600]:last-child{margin-right:%?0?%}.card-item.cur[data-v-33055600]{border-bottom:%?4?% solid #a7a7a7}.cuIcon-camerafill[data-v-33055600]{background-color:initial!important;color:#8799a3;font-size:%?38?%!important}.left-text[data-v-33055600]{width:%?100?%}uni-input[data-v-33055600]{padding:0 %?20?%;font-size:%?24?%;color:#414141;border-radius:%?15?%;border:%?1?% solid #a7a7a7}.input-weight[data-v-33055600]{width:%?410?%}.input-weight.duan[data-v-33055600]{width:%?100?%}.input-border[data-v-33055600]{height:1.4em;line-height:1.4em;color:#414141;font-size:%?24?%;padding:0 %?20?%;border-radius:%?15?%;border:%?1?% solid #a7a7a7}.birth-width[data-v-33055600]{width:%?104?%;padding:0 %?10?%;text-align:center}.birth-text-padding[data-v-33055600]{padding:0 %?6?%}.cuIcon-unfold[data-v-33055600]{font-size:%?24?%;position:relative;right:%?-4?%;font-weight:700}.textarea-border[data-v-33055600]{width:%?410?%;max-height:%?120?%!important;color:#414141;font-size:%?24?%;position:relative;right:%?-30?%;padding:0 %?20?%;border:%?1?% solid #a7a7a7;border-radius:%?15?%}.textarea-border-2[data-v-33055600]{width:%?560?%;min-height:%?200?%!important;color:#8b8b8b;font-size:%?24?%;margin:0 %?10?%;padding:%?10?% %?12?%;border:%?1?% solid #a7a7a7;border-radius:%?15?%}.totalNum[data-v-33055600]{color:#a7a7a7;position:relative;top:%?90?%;right:%?66?%}.info-tag[data-v-33055600]{padding:%?4?% %?10?%;margin:0 0 %?16?% %?16?%;border-radius:%?10?%}.bg-red[data-v-33055600]{border:1px solid #ff4a2d}.bg-blue[data-v-33055600]{border:1px solid #3f91e3}.bg-yellow[data-v-33055600]{border:1px solid #ffb434}.tag-border[data-v-33055600]{border:1px solid #a7a7a7;border-radius:%?15?%;color:#595959}.cu-btn[data-v-33055600]{padding:0 %?80?%;height:%?64?%}.text-placeholder[data-v-33055600],\n.uni-input-placeholder[data-v-33055600],\n.input-placeholder[data-v-33055600]{color:#c0c4cc}.btn[data-v-33055600]{border-radius:1000px;font-size:%?30?%;height:%?70?%;padding:0 %?90?%}.bg-redd[data-v-33055600]{color:#fff!important;background-color:#ff4a2d!important}.bg-greyy[data-v-33055600]{background-color:#8799a3!important;color:#fff!important}",""]),t.exports=e},e462:function(t,e,i){"use strict";var a=i("4496"),s=i.n(a);s.a},f9af:function(t,e,i){"use strict";var a={cScroll:i("c70c").default,cCard:i("3f1b").default,uLine:i("ab03").default,uCollapse:i("8e83").default,uCollapseItem:i("6a99").default,uButton:i("1564").default,uPicker:i("2396").default,uSelect:i("5a09").default,schoolPicker:i("0dd8").default,uModal:i("add7").default,uToast:i("6858").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("c-scroll",{attrs:{midHeight:!0}},[i("c-card",[i("v-uni-view",{attrs:{slot:"top"},slot:"top"},[t._v("基础资料")]),i("v-uni-view",{attrs:{slot:"content"},slot:"content"},[i("v-uni-view",{staticClass:"cu-avatar round xl margin-bottom",style:{backgroundImage:"url("+t.user.avatar+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateAvatar.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cu-tag lg badge cuIcon-camerafill"})],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("昵称")]),i("v-uni-view",{staticClass:"margin-left flex"},[i("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入昵称",type:"text"},model:{value:t.user.nickName,callback:function(e){t.$set(t.user,"nickName",e)},expression:"user.nickName"}})],1)],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("生日")]),i("v-uni-view",{staticClass:"margin-left title flex"},[i("v-uni-view",{staticClass:"input-border birth-width",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showYear=!0}}},[t._v(t._s(t.birth.year)),i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],1),i("v-uni-view",{staticClass:"birth-text-padding"},[t._v("年")]),i("v-uni-view",{staticClass:"input-border birth-width",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showMonth=!0}}},[t._v(t._s(t.birth.month)),i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],1),i("v-uni-view",{staticClass:"birth-text-padding"},[t._v("月")]),i("v-uni-view",{staticClass:"input-border birth-width",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showDay=!0}}},[t._v(t._s(t.birth.day)),i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],1),i("v-uni-view",{staticClass:"birth-text-padding"},[t._v("日")])],1)],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("常住地")]),i("v-uni-view",{staticClass:"margin-left"},[i("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入常住地",type:"text"},model:{value:t.user.city,callback:function(e){t.$set(t.user,"city",e)},expression:"user.city"}})],1)],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("在校情况")]),i("v-uni-view",{staticClass:"margin-left title"},[i("v-uni-view",{staticClass:"input-border input-weight",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showGraduation=!0}}},[i("v-uni-text",{class:null==t.user.graduation?"text-placeholder":""},[t._v(t._s(null==t.user.graduation?"请选择":0==t.user.graduation?"未毕业":"已毕业"))]),i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],1)],1)],1),i("v-uni-view",{staticClass:"flex",staticStyle:{"margin-top":"6rpx"}},[i("v-uni-text",{staticClass:"left-text"},[t._v("个性签名")]),i("v-uni-textarea",{staticClass:"textarea-border",attrs:{"placeholder-class":"text-placeholder",placeholder:"介绍自己的个性签名吧~~",maxlength:"30"},model:{value:t.user.sign,callback:function(e){t.$set(t.user,"sign",e)},expression:"user.sign"}}),i("v-uni-text",{staticClass:"totalNum"},[t._v(t._s(null==t.user.introduce?0:t.user.introduce.length)+"/30")])],1)],1)],1),i("c-card",[i("v-uni-view",{attrs:{slot:"top"},slot:"top"},[t._v("学校信息")]),i("v-uni-view",{attrs:{slot:"content"},slot:"content"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("学校")]),i("v-uni-view",{staticClass:"margin-left"},[i("v-uni-view",{staticClass:"input-border input-weight",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.schoolPicker.show()}}},[t.user.school&&0!=t.user.school.length?[t._v(t._s(t.user.school))]:[i("v-uni-text",{staticClass:"text-placeholder"},[t._v("请选择学校")])],i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],2)],1)],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("专业")]),i("v-uni-view",{staticClass:"margin-left"},[i("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入专业",type:"text"},model:{value:t.user.major,callback:function(e){t.$set(t.user,"major",e)},expression:"user.major"}})],1)],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"left-text"},[t._v("年级")]),i("v-uni-view",{staticClass:"margin-left title flex"},[i("v-uni-view",{staticClass:"input-border birth-width",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showGrade=!0}}},[t._v(t._s(t.user.grade)),i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],1),i("v-uni-view",{staticClass:"birth-text-padding"},[t._v("级")]),i("v-uni-view",{staticClass:"input-border birth-width",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showLevel=!0}}},[t._v(t._s(t.user.level)),i("v-uni-text",{staticClass:"cuIcon-unfold fr"})],1)],1)],1)],1)],1),i("c-card",[i("v-uni-view",{attrs:{slot:"top"},slot:"top"},[t._v("个性展示")]),i("v-uni-view",{attrs:{slot:"content"},slot:"content"},[i("v-uni-view",{staticClass:"text-sm"},[i("v-uni-view",{staticClass:"card-item"},[t._v("关键词")]),t._l(t.infoList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"card-item",class:a==t.TabCur?"cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.TabCur=a}}},[t._v(t._s(e.name))])}))],2),i("v-uni-view",{staticClass:"text-sm margin-top-sm ",staticStyle:{"min-height":"180rpx"}},[i("v-uni-view",{staticClass:"flex flex-wrap "},t._l(t.infoList[t.TabCur].list[t.infoList[t.TabCur].index],(function(e,a){return i("v-uni-view",{key:a,staticClass:"info-tag",class:t.getTabColor(e),on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeTag(e)}}},[t._v(t._s(e))])})),1)],1),i("v-uni-view",{staticClass:"text-center text-sm text-gray margin-bottom-sm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeList.apply(void 0,arguments)}}},[i("v-uni-text",[t._v("换一批")]),i("v-uni-text",{staticClass:"cuIcon-refresh margin-left-xs"})],1),i("v-uni-view",{staticClass:"flex text-sm"},[i("v-uni-text",{staticClass:"title text-nowrap margin-right-xs margin-left-sm"},[t._v("已选")]),i("v-uni-view",{staticClass:"text-sm"},[i("v-uni-view",{staticClass:"flex flex-wrap"},t._l(t.selectTagList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"info-tag",class:t.getTagColor(a)},[t._v(t._s(e.name))])})),1)],1)],1),i("v-uni-view",{staticClass:" text-sm margin-tb"},[i("v-uni-view",{staticClass:"title text-nowrap margin-left-sm"},[t._v("关于我")]),i("v-uni-textarea",{staticClass:"textarea-border-2",attrs:{"auto-height":!0,placeholder:"向对你感兴趣的人介绍下自己吧o(￣▽￣o)~\n可以讲讲你的爱好、家庭、求学经历、去过的地方等等等"},model:{value:t.user.introduce,callback:function(e){t.$set(t.user,"introduce",e)},expression:"user.introduce"}})],1),i("u-line",{attrs:{color:"#d4d4d4"}}),i("u-collapse",{attrs:{"head-style":{"font-size":"24rpx",color:"#066752"}}},[i("u-collapse-item",{attrs:{title:"看看别人怎么写"}},[i("v-uni-text",{staticClass:"text-sm"},[i("li",[t._v("性格：有点内向，但是熟了之后是个小话痨，喜欢分享日常")]),i("li",[t._v("家庭：父母是双职工，有一个哥哥，是普通的小康之家，家人感情很好，平时像朋友一样，什么话都可以说~")]),i("li",[t._v("兴趣爱好：我爱好不多，喜欢打打羽毛球，喜欢画画但是画得不好，你愿意带我了解接触你喜欢的事就再好不过了。")]),i("li",[t._v("喜欢的约会：吃饭唱歌看电影，除了户外运动都还好^w^")])])],1)],1)],1)],1),i("v-uni-view",{staticClass:"flex padding-top-xl margin-top justify-center"},[i("u-button",{staticClass:"btn bg-redd ",attrs:{ripple:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}},[t._v("保存")])],1),i("v-uni-view",{staticClass:"flex margin-top margin-bottom justify-center"},[i("u-button",{staticClass:"btn bg-greyy",attrs:{ripple:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")])],1),i("u-picker",{attrs:{mode:"time",params:{year:!0}},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setDate.apply(void 0,arguments)}},model:{value:t.showYear,callback:function(e){t.showYear=e},expression:"showYear"}}),i("u-picker",{attrs:{mode:"time",params:{year:!0}},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setGrage.apply(void 0,arguments)}},model:{value:t.showGrade,callback:function(e){t.showGrade=e},expression:"showGrade"}}),i("u-picker",{attrs:{mode:"time",params:{month:!0}},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setDate.apply(void 0,arguments)}},model:{value:t.showMonth,callback:function(e){t.showMonth=e},expression:"showMonth"}}),i("u-picker",{attrs:{mode:"time",params:{day:!0}},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setDate.apply(void 0,arguments)}},model:{value:t.showDay,callback:function(e){t.showDay=e},expression:"showDay"}}),i("u-select",{attrs:{list:t.graduationList},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setGraduate.apply(void 0,arguments)}},model:{value:t.showGraduation,callback:function(e){t.showGraduation=e},expression:"showGraduation"}}),i("u-select",{attrs:{list:t.levelList},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setLevel.apply(void 0,arguments)}},model:{value:t.showLevel,callback:function(e){t.showLevel=e},expression:"showLevel"}}),i("schoolPicker",{ref:"schoolPicker",attrs:{themeColor:"#097fff"},on:{onConfirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)}}}),i("u-modal",{attrs:{title:"哎呀","cancel-text":"手滑手滑","show-cancel-button":!0,content:"信息还没保存，确定取消吗？","mask-close-able":!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),i("u-toast",{ref:"uToast"})],1)},n=[];i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}))}}]);