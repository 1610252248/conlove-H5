(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-userEdit"],{"40f4":function(t,e,a){"use strict";a.r(e);var i=a("a544"),s=a("d3df");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("8ef5");var r,l=a("f0c5"),o=Object(l["a"])(s["default"],i["b"],i["c"],!1,null,"1770e985",null,!1,i["a"],r);e["default"]=o.exports},"505d":function(t,e,a){"use strict";(function(t){var i=a("ee27");a("7db0"),a("c740"),a("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("f3f3")),n=a("2f62"),r={computed:(0,s.default)({},(0,n.mapState)(["userDB"])),data:function(){return{user:{},isFemale:!1,sexPicker:["男","女"],startDate:"1985-01-01",endDate:"2100-01-01",gradePicker:["已工作","博士","研三","研二","研一","大四","大三","大二","大一"],TabCur:0,show:!1,selectTagList:[],colorList:["bg-red","bg-yellow","bg-blue"],infoList:[{name:"专业",list:[["哲学类","经济类","法学类","教育类","文学类","历史类","理学类","工学类","农学类","医学类","管理类","艺术类","军事类"]],index:0},{name:"爱好",list:[["篮球","跑步","跳绳","举重","足球","滑板","羽毛球","兵乓球","滑旱冰","看书","听音乐","看电影","绘画","写小说","积木","王者荣耀"],["弹吉他","钢琴","萨克斯","葫芦丝","折纸","剪纸","品茶","涂鸦","英雄联盟","五子棋","CF","地下城勇士","飞行棋","真心话大冒险"],["吃鸡","国际象棋","扑克牌"]],index:0},{name:"日常",list:[],index:0},{name:"经历",list:[],index:0},{name:"其它",list:[],index:0}]}},onLoad:function(){this.init()},methods:(0,s.default)({},(0,n.mapActions)(["set"]),{init:function(){var t=this;this.user=this.userDB,this.$http.get("/userLabel",{id:this.user.id}).then((function(e){t.selectTagList=e.data}))},sexChange:function(t){this.user.sex=this.sexPicker[t.detail.value]},dateChange:function(t){this.user.birthDate=t.detail.value},gradeChange:function(t){this.user.grade=this.gradePicker[t.detail.value]},changeList:function(){var t=this.TabCur,e=this.infoList[t];e.index+1<e.list.length?e.index++:(this.$u.toast("没有其他标签了"),e.index=0)},getTabColor:function(t){return this.selectTagList.find((function(e){return e.name===t}))?this.getTagColor(this.TabCur):"tag-border"},getTagColor:function(t){return this.colorList[t%3]},changeTag:function(t){var e=this.selectTagList.findIndex((function(e){return e.name===t})),a={name:t,userId:this.userDB.id};this.$http.post("/updateLabel",a),-1!=e?this.selectTagList.splice(e,1):this.selectTagList.push(a)},updateAvatar:function(){var t=this;this.$http.urlImgUpload("/fileUpload").then((function(e){t.user.avatar=e[0]}))},save:function(){var t=this;this.$http.post("/updateUserInfo",this.user).then((function(e){e.status==t.$http.SUCCESS&&(t.set({user:t.user}),t.$refs.uToast.show({title:e.msg,type:"success",url:"/pages/user/user",isTab:!0}),t.$eventBus.$emit("update-user-info"))}))},confirm:function(){t.log("用户点击确定")}})};e.default=r}).call(this,a("5a52")["default"])},"8ef5":function(t,e,a){"use strict";var i=a("fd9e"),s=a.n(i);s.a},"8f2e":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".card[data-v-1770e985]{box-shadow:0 2px 5px #ededed;width:86%;margin:%?40?% auto;border:1px solid #cecece;border-radius:%?15?%;color:#000;padding:%?30?% %?20?%}.card .title[data-v-1770e985]{height:%?44?%;line-height:%?44?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.card .card-item[data-v-1770e985]{height:%?50?%;display:inline-block;line-height:%?50?%;margin:0 %?18?%;padding:0 %?4?%;color:#333}.card .card-item[data-v-1770e985]:last-child{margin-right:%?0?%}.card .card-item.cur[data-v-1770e985]{border-bottom:%?4?% solid #a7a7a7}.cuIcon-camerafill[data-v-1770e985]{background-color:initial!important;color:#8799a3;font-size:%?38?%!important}.left-text[data-v-1770e985]{width:%?100?%}uni-input[data-v-1770e985]{padding:0 %?20?%;font-size:%?24?%;color:#414141;border-radius:%?15?%;border:%?1?% solid #a7a7a7}.input-weight[data-v-1770e985]{width:%?380?%}.input-weight.duan[data-v-1770e985]{width:%?100?%}.input-border[data-v-1770e985]{height:1.4em;line-height:1.4em;color:#414141;font-size:%?24?%;padding:0 %?20?%;border-radius:%?15?%;border:%?1?% solid #a7a7a7}.cuIcon-triangledownfill[data-v-1770e985]{font-size:%?34?%}.textarea-border[data-v-1770e985]{width:%?380?%;max-height:%?120?%!important;color:#414141;font-size:%?24?%;margin:0 0 0 %?30?%;padding:0 %?20?%;border:%?1?% solid #a7a7a7;border-radius:%?15?%}.textarea-border-2[data-v-1770e985]{width:%?484?%;max-height:%?200?%!important;color:#8b8b8b;font-size:%?24?%;margin:0 0 0 %?20?%;padding:0 %?14?%;border:%?1?% solid #a7a7a7;border-radius:%?15?%}.totalNum[data-v-1770e985]{color:#a7a7a7;position:relative;top:%?90?%;right:%?66?%}.info-tag[data-v-1770e985]{padding:%?5?% %?12?%;margin:0 0 %?16?% %?20?%;border-radius:%?10?%}.bg-red[data-v-1770e985]{border:1px solid #ff4a2d}.bg-blue[data-v-1770e985]{border:1px solid #3f91e3}.bg-yellow[data-v-1770e985]{border:1px solid #ffb434}.tag-border[data-v-1770e985]{border:1px solid #a7a7a7;border-radius:%?15?%;color:#595959}.cu-btn[data-v-1770e985]{padding:0 %?80?%;height:%?64?%}.text-placeholder[data-v-1770e985],\n.uni-input-placeholder[data-v-1770e985],\n.input-placeholder[data-v-1770e985]{color:#c0c4cc}.btn[data-v-1770e985]{border-radius:1000px;font-size:%?30?%;height:%?70?%;padding:0 %?90?%}.bg-redd[data-v-1770e985]{color:#fff!important;background-color:#ff4a2d!important}.bg-greyy[data-v-1770e985]{background-color:#8799a3!important;color:#fff!important}",""]),t.exports=e},a544:function(t,e,a){"use strict";var i={cScroll:a("c70c").default,uButton:a("1564").default,uModal:a("add7").default,uToast:a("6858").default},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("c-scroll",{attrs:{midHeight:!0}},[a("v-uni-view",{staticClass:"card"},[a("v-uni-view",{staticClass:"margin-bottom-xs"},[t._v("基础资料")]),a("v-uni-view",{staticClass:"padding-left text-sm"},[a("v-uni-view",{staticClass:"cu-avatar round xl margin-bottom",style:{backgroundImage:"url("+t.user.avatar+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateAvatar.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cu-tag lg badge cuIcon-camerafill"})],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text "},[t._v("昵称")]),a("v-uni-view",{staticClass:"margin-left flex"},[a("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入昵称",type:"text"},model:{value:t.user.nickName,callback:function(e){t.$set(t.user,"nickName",e)},expression:"user.nickName"}})],1)],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text"},[t._v("性别")]),a("v-uni-view",{staticClass:"margin-left title"},[a("v-uni-picker",{attrs:{range:t.sexPicker},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sexChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"input-border input-weight"},[t._v(t._s(t.user.sex)),a("v-uni-text",{staticClass:"cuIcon-triangledownfill fr"})],1)],1)],1)],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text"},[t._v("生日")]),a("v-uni-view",{staticClass:"margin-left title"},[a("v-uni-picker",{attrs:{mode:"date",start:t.startDate,end:t.endDate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.dateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"input-border input-weight"},[a("v-uni-text",{class:null==t.user.birthDate?"text-placeholder":""},[t._v(t._s(null==t.user.birthDate?"请选择":t.user.birthDate))]),a("v-uni-text",{staticClass:"cuIcon-triangledownfill fr"})],1)],1)],1)],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text"},[t._v("常住地")]),a("v-uni-view",{staticClass:"margin-left"},[a("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入常住地",type:"text"},model:{value:t.user.city,callback:function(e){t.$set(t.user,"city",e)},expression:"user.city"}})],1)],1),a("v-uni-view",{staticClass:"flex",staticStyle:{"margin-top":"6rpx"}},[a("v-uni-text",{staticClass:"left-text"},[t._v("个性签名")]),a("v-uni-textarea",{staticClass:"textarea-border",attrs:{"placeholder-class":"text-placeholder",placeholder:"介绍自己的个性签名吧~~",maxlength:"30"},model:{value:t.user.sign,callback:function(e){t.$set(t.user,"sign",e)},expression:"user.sign"}}),a("v-uni-text",{staticClass:"totalNum"},[t._v(t._s(null==t.user.introduce?0:t.user.introduce.length)+"/30")])],1)],1)],1),a("v-uni-view",{staticClass:"card"},[a("v-uni-view",{staticClass:"margin-bottom-xs"},[t._v("学校信息")]),a("v-uni-view",{staticClass:"padding-left text-sm"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text"},[t._v("学校")]),a("v-uni-view",{staticClass:"margin-left"},[a("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入学校",type:"text"},model:{value:t.user.school,callback:function(e){t.$set(t.user,"school",e)},expression:"user.school"}})],1)],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text"},[t._v("专业")]),a("v-uni-view",{staticClass:"margin-left"},[a("v-uni-input",{staticClass:"input-weight",attrs:{placeholder:"请输入专业",type:"text"},model:{value:t.user.major,callback:function(e){t.$set(t.user,"major",e)},expression:"user.major"}})],1)],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"left-text"},[t._v("在校情况")]),a("v-uni-view",{staticClass:"margin-left title"},[a("v-uni-picker",{attrs:{range:t.gradePicker},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.gradeChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"input-border input-weight"},[a("v-uni-text",{class:null==t.user.grade?"text-placeholder":""},[t._v(t._s(null==t.user.grade?"请选择":t.user.grade))]),a("v-uni-text",{staticClass:"cuIcon-triangledownfill fr"})],1)],1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"card"},[a("v-uni-view",{staticClass:"margin-bottom-xs"},[t._v("个性展示")]),a("v-uni-view",{staticClass:"text-sm"},[a("v-uni-view",{staticClass:"card-item"},[t._v("关键词")]),t._l(t.infoList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"card-item",class:i==t.TabCur?"cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.TabCur=i}}},[t._v(t._s(e.name))])}))],2),a("v-uni-view",{staticClass:"text-sm margin-top-sm"},[a("v-uni-view",{staticClass:"flex flex-wrap "},t._l(t.infoList[t.TabCur].list[t.infoList[t.TabCur].index],(function(e,i){return a("v-uni-view",{key:i,staticClass:"info-tag",class:t.getTabColor(e),on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.changeTag(e)}}},[t._v(t._s(e))])})),1)],1),a("v-uni-view",{staticClass:"text-center text-sm text-gray margin-bottom-sm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeList.apply(void 0,arguments)}}},[a("v-uni-text",[t._v("换一批")]),a("v-uni-text",{staticClass:"cuIcon-refresh margin-left-xs"})],1),a("v-uni-view",{staticClass:"flex text-sm"},[a("v-uni-text",{staticClass:"title text-nowrap margin-right-xs margin-left"},[t._v("已选")]),a("v-uni-view",{staticClass:"text-sm"},[a("v-uni-view",{staticClass:"flex flex-wrap"},t._l(t.selectTagList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"info-tag",class:t.getTagColor(i)},[t._v(t._s(e.name))])})),1)],1)],1),a("v-uni-view",{staticClass:"flex text-sm margin-tb"},[a("v-uni-text",{staticClass:"title text-nowrap padding-left-xs"},[t._v("关于我")]),a("v-uni-textarea",{staticClass:"textarea-border-2",attrs:{placeholder:"向对你感兴趣的人介绍下自己吧~(￣▽￣)~*"},model:{value:t.user.introduce,callback:function(e){t.$set(t.user,"introduce",e)},expression:"user.introduce"}})],1)],1),a("v-uni-view",{staticClass:"flex padding-top-xl margin-top justify-center"},[a("u-button",{staticClass:"btn bg-redd ",attrs:{ripple:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}},[t._v("保存")])],1),a("v-uni-view",{staticClass:"flex margin-top margin-bottom justify-center"},[a("u-button",{staticClass:"btn bg-greyy",attrs:{ripple:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show=!0}}},[t._v("取消")])],1)],1),a("u-modal",{attrs:{title:"哎呀","cancel-text":"手滑手滑","show-cancel-button":!0,content:"信息还没保存，确定取消吗？","mask-close-able":!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),a("u-toast",{ref:"uToast"})],1)},n=[];a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}))},d3df:function(t,e,a){"use strict";a.r(e);var i=a("505d"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},fd9e:function(t,e,a){var i=a("8f2e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("4f06").default;s("5dda3cd9",i,!0,{sourceMap:!1,shadowMode:!1})}}]);